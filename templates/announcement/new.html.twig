{# templates/announcement/new.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}Create Announcement{% endblock %}

{% block body %}
    <h1>Create New Announcement</h1>

    {{ form_start(form) }}

    <div>
        {{ form_label(form.title) }}
        {{ form_widget(form.title) }}
        {{ form_errors(form.title) }}
    </div>

    <div>
        {{ form_label(form.content) }}
        {{ form_widget(form.content) }}
        {{ form_errors(form.content) }}
    </div>

    <div>
        {{ form_label(form.imageFile) }}
        {{ form_widget(form.imageFile) }}
        {{ form_errors(form.imageFile) }}
    </div>

    <div>
        {{ form_label(form.isPublic) }}
        {{ form_widget(form.isPublic) }}
        {{ form_errors(form.isPublic) }}
    </div>

    <div id="private-fields" style="display: none; margin-left: 1rem;">
        <h4>Private Access Settings</h4>

        <div>
            {{ form_label(form.targetRoles) }}
            {{ form_widget(form.targetRoles) }}
            {{ form_errors(form.targetRoles) }}
        </div>

        <div>
            {{ form_label(form.targetTags) }}
            {{ form_widget(form.targetTags) }}
            {{ form_errors(form.targetTags) }}
        </div>

        <div>
            {{ form_label(form.targetUsers) }}
            {{ form_widget(form.targetUsers) }}
            {{ form_errors(form.targetUsers) }}
        </div>
    </div>

    <div>
        {{ form_label(form.infoboard) }}
        {{ form_widget(form.infoboard) }}
        {{ form_errors(form.infoboard) }}
    </div>

    <div>
        {{ form_label(form.commentsEnabled) }}
        {{ form_widget(form.commentsEnabled) }}
        {{ form_errors(form.commentsEnabled) }}
    </div>

    <div>
        {{ form_label(form.visible) }}
        {{ form_widget(form.visible) }}
        {{ form_errors(form.visible) }}
    </div>

    <button class="btn btn-primary">Save Announcement</button>
    {{ form_end(form) }}

    <a href="{{ path('app_announcement_index') }}">Back to list</a>

    {# Toggle script #}
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const publicCheckbox = document.getElementById('announcement_isPublic');
            const privateFields   = document.getElementById('private-fields');

            function togglePrivateFields() {
                privateFields.style.display = publicCheckbox.checked ? 'none' : 'block';
            }

            publicCheckbox.addEventListener('change', togglePrivateFields);
            togglePrivateFields();
        });
    </script>
{% endblock %}
